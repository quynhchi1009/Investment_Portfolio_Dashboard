<div class="tree-node" [class.expanded]="isExpanded" [class.has-children]="node.children && node.children.length > 0">
  <div class="node-header" (click)="toggleNode()">
      <span class="toggle-icon" *ngIf="node.children && node.children.length > 0">
          {{ isExpanded ? '▼' : '►' }}
      </span>
      <span class="node-icon">{{ getIcon(node.type) }}</span>
      <span class="node-name">{{ node.name }}</span>
      <span class="node-meta" [title]="getTooltipText()">
          ({{ node.type }}
          <ng-container *ngIf="node.children && node.children.length > 0">
              , {{ childCount }} children
          </ng-container>)
      </span>
  </div>

  <div class="node-children" *ngIf="isExpanded && node.children">
      <app-tree-node *ngFor="let child of node.children" [node]="child"></app-tree-node>
  </div>
</div>
